## Nginx锁的实现

多进程或者多线程的程序，涉及到对共享资源的修改，都需要使用到锁.

### Nginx内部锁的种类

* 读写锁 (src/core/ngx_rwlock.[hc])
* 自旋锁 (src/core/ngx_spinlock.c)
* 互斥锁 (src/core/ngx_shmtx.[hc)



### 读写锁

#### 概述
读写锁与互斥量类似，不过读写锁允许更高的并行性。
互斥量要么是锁住状态，要么是不加锁状态，而且一次只有一个线程对其加锁。
读写锁可以有三种状态：读模式下加锁状态，写模式下加锁状态，不加锁状态。
一次只有一个线程可以占有写模式的读写锁，但是多个线程可用同时占有读模式的读写锁。
读写锁也叫做共享-独占锁，当读写锁以读模式锁住时，它是以共享模式锁住的，当它以写模式锁住时，它是以独占模式锁住的。

#### 操作API
